<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
   integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
   crossorigin=""/>
	
	<style>
		.tooltip{
			position: absolute;
			background: yellow;
/*			stroke: black;*/
		}

		#map {
			width: 800px;
			height: 600px;
		}
	</style>
	
	<script src="https://d3js.org/d3.v7.min.js"></script>
	<script src="https://d3js.org/topojson.v2.min.js"></script>
	
	 <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
   integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
   crossorigin=""></script>
	
	
</head>
	
<body>
	<div id="map"></div>
	<div class="tooltip"></div>
	
	<script>
//		https://leafletjs.com/SlavaUkraini/examples/geojson/
		let map_width = 800, map_height = 600;

		let svg = d3.select("body").select("svg")
			.attr("width", map_width)
			.attr("height", map_height)
			.attr("viewBox", "0 0 " + map_width + " " + map_height);

		let y_lat_sg = 1.290270
		let x_long_sg = 103.851959
		let xy_sg = [y_lat_sg, x_long_sg] 

		let projection_sg = d3.geoMercator()
									 .center(xy_sg) 
								 	 .scale(200000);
		
		let geopath = d3.geoPath()
						.projection(projection_sg);

		let url_map = "https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson"
		
		let url_data = "https://raw.githubusercontent.com/okiane/CoastalCleanupSG/main/data/map.topojson"
			
		let tiles = L.tileLayer('https://maps-{s}.onemap.sg/v3/Default/{z}/{x}/{y}.png', {
			detectRetina: true,
			maxZoom: 18,
			minZoom: 11,
			//Do not remove this attribution
			attribution: '<img src="https://docs.onemap.sg/maps/images/oneMap64-01.png" style="height:20px;width:20px;">' +
					   'New OneMap | Map data Â© contributors, <a href="http://SLA.gov.sg">Singapore Land Authority</a>'
		});
		
		var map = L.map('map')
					.setView([y_lat_sg, x_long_sg])
					.setZoom(11);
		
//		map.fitBounds([y_lat_sg-0.2, y_lat_sg-0.2],
//					  [y_lat_sg+0.2, y_lat_sg+0.2]);
		
		tiles.addTo(map);
		
		
		
//		var map = new L.Map("map", {
//			center: xy_sg, 
//			zoom: 12,
//			maxBounds: L.latLngBounds(
//				L.latLng(y_lat_sg-0.2, y_lat_sg-0.2), 
//				L.latLng(y_lat_sg+0.2, y_lat_sg+0.2))
//		})
//			.addLayer(tiles);
		
		
		// Load GeoJSON data
		d3.json(url_data).then(data_map => {
			console.log(data_map)
			
			var data_json = topojson.feature(data_map, data_map.objects.unnamed);
			
			var style_lines = {
				"color": "#ff8888",
				"weight": 5,
				"opacity": 0.8
			}
			
//			function onEachFeature(feature, layer) {
//				if (feature.properties && feature.properties.popupContent) {
//					layer.bindPopup(feature.properties.popupContent);
//				}
//			}
			
			
			L.geoJSON(data_json, {
				style: style_lines
//				style: function(feature) {
//					switch (feature.properties.party) {
//						case 'Republican': return {color: "#ff0000"};
//						case 'Democrat': return {color: "#0000ff"};
//						}
//					}
				})
//				onEachFeature: onEachFeature
				.addTo(map);

	})
		
		</script>

</body>
</html>